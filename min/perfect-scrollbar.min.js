/*! perfect-widget-scrollbar - v0.4.12
* https://github.com/cmanzana/perfect-widget-scrollbar
* Copyright (c) 2014 Carlos Manzanares; Licensed MIT */
(function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(jQuery)})(function(e){"use strict";var n={wheelSpeed:10,wheelPropagation:!1,minScrollbarLength:null,maxScrollbarLength:null,useBothWheelAxes:!1,useKeyboard:!0,suppressScrollX:!1,suppressScrollY:!1,scrollXMarginOffset:0,scrollYMarginOffset:0,includePadding:!1,scrollTopFunctionFactory:function(e){return function(n){return void 0===n?e.scrollTop():(e.scrollTop(n),void 0)}},scrollLeftFunctionFactory:function(e){return function(n){return void 0===n?e.scrollLeft():(e.scrollLeft(n),void 0)}},contentHeightFunctionFactory:function(e){return function(){return e.prop("scrollHeight")}},contentWidthFunctionFactory:function(e){return function(){return e.prop("scrollWidth")}},isContainerScrolled:!0},t=function(){var e=0;return function(){var n=e;return e+=1,".perfect-scrollbar-"+n}}();e.fn.perfectScrollbar=function(r,o){return this.each(function(){var a=e.extend(!0,{},n),i=e(this);"object"==typeof r?e.extend(!0,a,r):o=r;var s=a.scrollTopFunctionFactory(i),l=a.scrollLeftFunctionFactory(i),c=a.contentHeightFunctionFactory(i),u=a.contentWidthFunctionFactory(i);if("update"===o)return i.data("perfect-scrollbar-update")&&i.data("perfect-scrollbar-update")(),i;if("destroy"===o)return i.data("perfect-scrollbar-destroy")&&i.data("perfect-scrollbar-destroy")(),i;if(i.data("perfect-scrollbar"))return i.data("perfect-scrollbar");i.addClass("ps-container");var d,p,f,v,h,b,g,m,w,y,S=e("<div class='ps-scrollbar-x-rail'></div>").appendTo(i),C=e("<div class='ps-scrollbar-y-rail'></div>").appendTo(i),I=e("<div class='ps-scrollbar-x'></div>").appendTo(S),x=e("<div class='ps-scrollbar-y'></div>").appendTo(C),F=parseInt(S.css("bottom"),10),P=F===F,T=P?null:parseInt(S.css("top"),10),D=parseInt(C.css("right"),10),X=D===D,Y=X?null:parseInt(C.css("left"),10),k="rtl"===i.css("direction"),L=t(),W=parseInt(S.css("borderLeftWidth"),10)+parseInt(S.css("borderRightWidth"),10),M=parseInt(S.css("borderTopWidth"),10)+parseInt(S.css("borderBottomWidth"),10),j=function(e,n){var t=e+n,r=v-w;y=0>t?0:t>r?r:t;var o=parseInt(y*(b-v)/(v-w),10);s(o)},E=function(e,n){var t=e+n,r=f-g;m=0>t?0:t>r?r:t;var o=parseInt(m*(h-f)/(f-g),10);l(o)},H=function(e){return a.minScrollbarLength&&(e=Math.max(e,a.minScrollbarLength)),a.maxScrollbarLength&&(e=Math.min(e,a.maxScrollbarLength)),e},O=function(){var e=a.isContainerScrolled?l():0,n=a.isContainerScrolled?s:0,t={width:f,display:d?"inherit":"none"};t.left=k?e+f-h:e,P?t.bottom=F-n:t.top=T+n,S.css(t);var r={top:n,height:v,display:p?"inherit":"none"};X?r.right=k?h-e-D-x.outerWidth():D-e:r.left=k?e+2*f-h-Y-x.outerWidth():Y+e,C.css(r),I.css({left:m,width:g-W}),x.css({top:y,height:w-M}),d?i.addClass("ps-active-x"):i.removeClass("ps-active-x"),p?i.addClass("ps-active-y"):i.removeClass("ps-active-y")},q=function(){f=a.includePadding?i.innerWidth():i.width(),v=a.includePadding?i.innerHeight():i.height(),h=u(),b=c(),!a.suppressScrollX&&h>f+a.scrollXMarginOffset?(d=!0,g=H(parseInt(f*f/h,10)),m=parseInt(l()*(f-g)/(h-f),10)):(d=!1,g=0,m=0,l(0)),!a.suppressScrollY&&b>v+a.scrollYMarginOffset?(p=!0,w=H(parseInt(v*v/b,10)),y=parseInt(s()*(v-w)/(b-v),10)):(p=!1,w=0,y=0,s(0)),y>=v-w&&(y=v-w),m>=f-g&&(m=f-g),O()},A=function(){var n,t;I.bind("mousedown"+L,function(e){t=e.pageX,n=I.position().left,S.addClass("in-scrolling"),e.stopPropagation(),e.preventDefault()}),e(document).bind("mousemove"+L,function(e){S.hasClass("in-scrolling")&&(E(n,e.pageX-t),q(),e.stopPropagation(),e.preventDefault(),a.isContainerScrolled||q())}),e(document).bind("mouseup"+L,function(){S.hasClass("in-scrolling")&&S.removeClass("in-scrolling")}),n=t=null},B=function(){var n,t;x.bind("mousedown"+L,function(e){t=e.pageY,n=x.position().top,C.addClass("in-scrolling"),e.stopPropagation(),e.preventDefault()}),e(document).bind("mousemove"+L,function(e){C.hasClass("in-scrolling")&&(j(n,e.pageY-t),q(),e.stopPropagation(),e.preventDefault(),a.isContainerScrolled||q())}),e(document).bind("mouseup"+L,function(){C.hasClass("in-scrolling")&&C.removeClass("in-scrolling")}),n=t=null},K=function(e,n){var t=s();if(0===e){if(!p)return!1;if(0===t&&n>0||t>=b-v&&0>n)return!a.wheelPropagation}var r=l();if(0===n){if(!d)return!1;if(0===r&&0>e||r>=h-f&&e>0)return!a.wheelPropagation}return!0},z=function(){a.wheelSpeed/=10;var e=!1;i.bind("mousewheel"+L,function(n,t,r,o){var i=n.deltaX*n.deltaFactor||r,c=n.deltaY*n.deltaFactor||o;e=!1,a.useBothWheelAxes?p&&!d?(c?s(s()-c*a.wheelSpeed):s(s()+i*a.wheelSpeed),e=!0):d&&!p&&(i?l(l()+i*a.wheelSpeed):l(l()-c*a.wheelSpeed),e=!0):(s(s()-c*a.wheelSpeed),l(l()+i*a.wheelSpeed)),q(),e=e||K(i,c),e&&(n.stopPropagation(),n.preventDefault())}),i.bind("MozMousePixelScroll"+L,function(n){e&&n.preventDefault()})},Q=function(){var n=!1;i.bind("mouseenter"+L,function(){n=!0}),i.bind("mouseleave"+L,function(){n=!1});var t=!1;e(document).bind("keydown"+L,function(r){if(!(r.isDefaultPrevented&&r.isDefaultPrevented()||!n||e(document.activeElement).is(":input,[contenteditable]"))){var o=0,i=0;switch(r.which){case 37:o=-30;break;case 38:i=30;break;case 39:o=30;break;case 40:i=-30;break;case 33:i=90;break;case 32:case 34:i=-90;break;case 35:i=-v;break;case 36:i=v;break;default:return}s(s()-i),l(l()+o),t=K(o,i),t&&r.preventDefault(),a.isContainerScrolled||q()}})},R=function(){var e=function(e){e.stopPropagation()};x.bind("click"+L,e),C.bind("click"+L,function(e){var n=parseInt(w/2,10),t=e.pageY-C.offset().top-n,r=v-w,o=t/r;0>o?o=0:o>1&&(o=1),s((b-v)*o),a.isContainerScrolled||q()}),I.bind("click"+L,e),S.bind("click"+L,function(e){var n=parseInt(g/2,10),t=e.pageX-S.offset().left-n,r=f-g,o=t/r;0>o?o=0:o>1&&(o=1),l((h-f)*o),a.isContainerScrolled||q()})},G=function(){var n=function(e,n){s(s()-n),l(l()-e),q()},t={},r=0,o={},a=null,c=!1;e(window).bind("touchstart"+L,function(){c=!0}),e(window).bind("touchend"+L,function(){c=!1}),i.bind("touchstart"+L,function(e){var n=e.originalEvent.targetTouches[0];t.pageX=n.pageX,t.pageY=n.pageY,r=(new Date).getTime(),null!==a&&clearInterval(a),e.stopPropagation()}),i.bind("touchmove"+L,function(e){if(!c&&1===e.originalEvent.targetTouches.length){var a=e.originalEvent.targetTouches[0],i={};i.pageX=a.pageX,i.pageY=a.pageY;var s=i.pageX-t.pageX,l=i.pageY-t.pageY;n(s,l),t=i;var u=(new Date).getTime(),d=u-r;d>0&&(o.x=s/d,o.y=l/d,r=u),e.preventDefault()}}),i.bind("touchend"+L,function(){clearInterval(a),a=setInterval(function(){return.01>Math.abs(o.x)&&.01>Math.abs(o.y)?(clearInterval(a),void 0):(n(30*o.x,30*o.y),o.x*=.8,o.y*=.8,void 0)},10)})},J=function(){i.bind("scroll"+L,function(){q()})},N=function(){i.unbind(L),e(window).unbind(L),e(document).unbind(L),i.data("perfect-scrollbar",null),i.data("perfect-scrollbar-update",null),i.data("perfect-scrollbar-destroy",null),I.remove(),x.remove(),S.remove(),C.remove(),S=C=I=x=d=p=f=v=h=b=g=m=F=P=T=w=y=D=X=Y=k=L=null},U=function(n){i.addClass("ie").addClass("ie"+n);var t=function(){var n=function(){e(this).addClass("hover")},t=function(){e(this).removeClass("hover")};i.bind("mouseenter"+L,n).bind("mouseleave"+L,t),S.bind("mouseenter"+L,n).bind("mouseleave"+L,t),C.bind("mouseenter"+L,n).bind("mouseleave"+L,t),I.bind("mouseenter"+L,n).bind("mouseleave"+L,t),x.bind("mouseenter"+L,n).bind("mouseleave"+L,t)},r=function(){O=function(){var e={left:m+l(),width:g};P?e.bottom=F:e.top=T,I.css(e);var n={top:y+s(),height:w};X?n.right=D:n.left=Y,x.css(n),I.hide().show(),x.hide().show()}};6===n&&(t(),r())},V="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,Z=function(){var e=navigator.userAgent.toLowerCase().match(/(msie) ([\w.]+)/);e&&"msie"===e[1]&&U(parseInt(e[2],10)),q(),J(),A(),B(),R(),V&&G(),i.mousewheel&&z(),a.useKeyboard&&Q(),i.data("perfect-scrollbar",i),i.data("perfect-scrollbar-update",q),i.data("perfect-scrollbar-destroy",N)};return Z(),i})}});